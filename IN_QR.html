html>
<html lang="vi"> <head> <meta charset="UTF-8"> <title>In QR Code T√†i s·∫£n</title> <style> @media print { @page { size: A4; margin: 10mm; } body { margin: 0; } button, #colInput { display: none; } /* ·∫®n khi in */ h2, .info-row, .controls { display: none; } /* ·∫®n khi in */ } body { font-family: Arial, sans-serif; padding: 10px; } h2 { text-align: center; margin-bottom: 10px; } .info-row { margin-bottom: 10px; text-align: left; font-size: 14px; } .info-row p { margin: 2px 0; } .controls { margin: 10px 0; text-align: center; } input[type="number"] { width: 50px; padding: 4px; font-size: 14px; margin-right: 10px; } button { padding: 6px 20px; font-size: 14px; cursor: pointer; } .qr-container { display: grid; gap: 15px; justify-items: center; /* cƒÉn gi·ªØa QR */ margin-top: 10px; } .qr-item { text-align: center; padding: 5px; border: 1px solid #ddd; page-break-inside: avoid; } .qr-item p { margin: 5px 0 0 0; font-size: 12px; word-break: break-word; } </style> </head> <body> <h2>Danh s√°ch QR Code T√†i s·∫£n</h2> <div class="info-row"> <p><strong>M√£ in:</strong> <span id="IDQR"></span></p> <p><strong>Nh√≥m T√™n t√†i s·∫£n:</strong> <span id="Nhom"></span></p> <p><strong>Ng√†y in:</strong> <span id="ngayin"></span></p> </div> <div class="controls"> <label for="colInput">S·ªë c·ªôt:</label> <input type="number" id="colInput" value="6" min="1" max="10"> <label for="sizeInput">K√≠ch th∆∞·ªõc QR:</label> <input type="number" id="sizeInput" value="150" min="50" max="1000"> <button onclick="renderQR()">C·∫≠p nh·∫≠t</button> <button onclick="window.print()"> üñ®Ô∏è</button> </div> <div class="qr-container" id="qrContainer"></div> <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script> <script> function getQueryParam(name) { const params = new URLSearchParams(window.location.search); return params.get(name) || ""; } // --- L·∫•y th√¥ng tin t·ª´ URL const rawData = getQueryParam("data"); const qrArray = rawData ? rawData.split("_b_") : []; const IDQR = getQueryParam("IDQR"); const Nhom = getQueryParam("Nhom"); const ngayin = getQueryParam("ngayin"); // Hi·ªÉn th·ªã th√¥ng tin document.getElementById("IDQR").textContent = IDQR; document.getElementById("Nhom").textContent = Nhom; document.getElementById("ngayin").textContent = ngayin; const container = document.getElementById("qrContainer"); // --- H√†m render QR code function renderQR() { const numCols = parseInt(document.getElementById("colInput").value) || 4; const qrSize = parseInt(document.getElementById("sizeInput").value) || 100; container.innerHTML = ""; container.style.gridTemplateColumns = repeat(${numCols}, 1fr); qrArray.forEach(item => { if(!item) return; const parts = item.split("|"); const labelText = parts[0] || ""; const maParts = labelText.split("-"); const maQR = maParts.length > 1 ? maParts[1] : labelText; const itemDiv = document.createElement("div"); itemDiv.className = "qr-item"; const qrDiv = document.createElement("div"); qrDiv.style.width = qrSize + "px"; qrDiv.style.height = qrSize + "px"; qrDiv.style.margin = "0 auto"; const label = document.createElement("p"); label.textContent = labelText; itemDiv.appendChild(qrDiv); itemDiv.appendChild(label); container.appendChild(itemDiv); new QRCode(qrDiv, { text: maQR, width: qrSize, height: qrSize, correctLevel: QRCode.CorrectLevel.H }); }); } // --- Render l·∫ßn ƒë·∫ßu renderQR(); </script> </body> </html>
