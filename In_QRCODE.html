<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>In QR Code / Barcode</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
<style>
  @media print {
    @page { size: A4; margin: 10mm; }
    body { margin: 0; }
    button, select, input { display: none; }
  }
  .preview { margin-top: 20px; }
</style>
</head>
<body>
  <h2>In QR Code / Barcode</h2>
  <label>Nhập mã:</label>
  <input type="text" id="textInput" value="TS_994B61C3"><br><br>

  <label>Chọn loại:</label>
  <select id="typeSelect" onchange="toggleSizeInput()">
    <option value="qr">QR Code</option>
    <option value="barcode">Barcode</option>
  </select><br><br>

  <div id="qrSizeInput">
    <label>Kích thước (px):</label>
    <input type="number" id="sizeInput" value="200">
  </div>

  <div id="barcodeSizeInput" style="display:none;">
    <label>Rộng (px):</label>
    <input type="number" id="widthInput" value="2"> <br>
    <label>Cao (px):</label>
    <input type="number" id="heightInput" value="100">
  </div><br>

  <button onclick="generate()">Tạo mã</button>
  <button onclick="window.print()">In</button>

  <div class="preview" id="preview"></div>

<script>
function toggleSizeInput() {
  let type = document.getElementById("typeSelect").value;
  document.getElementById("qrSizeInput").style.display = type === "qr" ? "block" : "none";
  document.getElementById("barcodeSizeInput").style.display = type === "barcode" ? "block" : "none";
}

function generate() {
  let text = document.getElementById("textInput").value;
  let type = document.getElementById("typeSelect").value;
  let preview = document.getElementById("preview");
  preview.innerHTML = "";

  if (type === "qr") {
    let size = parseInt(document.getElementById("sizeInput").value) || 200;
    let canvas = document.createElement("canvas");
    QRCode.toCanvas(canvas, text, { width: size }, function (error) {
      if (error) console.error(error);
    });
    preview.appendChild(canvas);
  } else {
    let svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    let width = parseInt(document.getElementById("widthInput").value) || 2;
    let height = parseInt(document.getElementById("heightInput").value) || 100;
    JsBarcode(svg, text, { format: "CODE128", width: width, height: height, displayValue: true });
    preview.appendChild(svg);
  }
}
</script>
</body>
</html>
