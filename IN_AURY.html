<script>
  const params = new URLSearchParams(window.location.search);
  const rawData = params.get("data");

  if (rawData) {
    const container = document.getElementById("container");
    const items = rawData.split("_n_");

    items.forEach((item, index) => {
      const parts = item.split(/ *- */);  // sửa ở đây
      if (parts.length >= 2) {
        const productName = parts.slice(0, parts.length - 1).join(" - ").trim();
        const barcodeValue = parts[parts.length - 1].trim();

        const page = document.createElement("div");
        page.className = "page";

        page.innerHTML = `
          <div class="barcode-item">
            <div class="label">${productName}</div>
            <svg id="barcode${index}"></svg>
            <div class="code">${barcodeValue}</div>
          </div>
        `;

        container.appendChild(page);

        JsBarcode(`#barcode${index}`, barcodeValue, {
          format: "CODE128",
          displayValue: false
        });
      }
    });
  } else {
    document.getElementById("container").innerHTML = "<p style='text-align:center;color:red'>❌ Không có dữ liệu</p>";
  }
</script>
